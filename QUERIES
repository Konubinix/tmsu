Dataset
=======

themagus.epub: book year:1966
thematrix.mpeg: movie year:1999
twelvemonkeys.mpeg: movie year:1995
unison.mp3: song

Queries
=======

TAG
---

> tmsu files movie
> tmsu files AND movie
thematrix.mpeg
twelvemonkeys.mpeg

    select name from file
    where 1==1 and

    -- movie
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'movie'))

TAG AND TAG
-----------

> tmsu files movie year:1999
> tmsu files movie AND year:1999
thematrix.mpeg

    select name from file
    where 1==1 and

    -- movie
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'movie'))

    -- and
    and

    -- year:1999
    id in (select file_id
               from file_tag
               where tag_id = (select id
                               from tag
                               where name = 'year:1999'))

TAG OR TAG
----------

> tmsu files movie OR book
> tmsu files movie OR book
thematrix.mpeg
twelvemonkeys.mpeg
themagus.epub

    select name from file
    where 1==1 and

    -- movie
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'movie'))

    -- or
    or

    -- book
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'book'))

(TAG AND TAG) OR TAG
--------------------

> tmsu files movie year:1999 OR song
> tmsu files (movie AND year:1999) OR song
> tmsu files movie AND year:1999 OR song
thematrix.mpeg
unison.mp3

    select name from file
    where 1==1 and

    -- movie
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'movie'))

    -- and
    and

    -- year:1999
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'year:1999'))

    -- or
    or
    
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'song'))

TAG AND (TAG OR TAG)
--------------------

> tmsu files movie (year:1999 OR year:1995)
> tmsu files movie AND (year:1999 OR year:1995)
thematrix.mpeg
twelvemonkeys.mpeg

    select name from file
    where 1==1 and

    -- movie
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'movie'))
    -- and
    and
    
    -- open parenthesis
    (
     
        id in (select file_id
               from file_tag
               where tag_id = (select id
                               from tag
                               where name = 'year:1999'))

         -- or
         or
         
         id in (select file_id
                   from file_tag
                   where tag_id = (select id
                                   from tag
                                   where name = 'year:1995'))

    -- close parenthesis
    )

TAG OR (TAG AND TAG)
--------------------

> tmsu files movie OR year:1966 AND book
themagus.epub
thematrix.mpeg
twelvemonkeys.mpeg

    select name from file
    where 1==1 and

    -- movie
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'movie'))

    -- or
    or
    
    -- year:1966
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'year:1966'))

    -- and
    and
    
    -- book
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'book'))

NOT TAG
-------

> tmus files NOT movie
themagus.epub
unison.mp3

    select name from file
    where 1==1 and

    -- not
    not

    -- movie
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'movie'))

TAG AND NOT TAG
---------------

> tmsu files movie AND NOT year:1999
twelvemonkeys.mpeg

    select name from file
    where 1==1 and

    -- movie
    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'movie'))

    -- and
    and
    
    -- not
    not

    id in (select file_id
           from file_tag
           where tag_id = (select id
                           from tag
                           where name = 'year:1999'))

NOT TAG AND NOT TAG
-------------------

> tmsu files NOT movie AND NOT book
unison.mp3

    select name from file
    where 1==1
    -- and not
    and id not in (select file_id
                   from file_tag
                   where tag_id = (select id
                                   from tag
                                   where name = 'movie'))
    -- and not
    and id not in (select file_id
                   from file_tag
                   where tag_id = (select id
                                   from tag
                                   where name = 'book'))

NOT (TAG AND TAG)
-----------------

> tmsu files NOT (movie AND year:1999)
> tmsu files NOT movie OR NOT year:1999)
themagus.epub
twelvemonkeys.mpeg
unison.mp3

    select name from file
    where 1==1
    -- and not
    and id not in (select file_id
                   from file_tag
                   where tag_id = (select id
                                   from tag
                                   where name = 'movie'))
    -- or not
    or id not in (select file_id
                   from file_tag
                   where tag_id = (select id
                                   from tag
                                   where name = 'year:1999'))

NOT (TAG OR TAG)
-----------------

> tmsu files NOT (movie OR song)
> tmsu files AND NOT movie AND NOT song
themagus.epub

    select name from file
    where 1==1
    -- and not
    and id not in (select file_id
                   from file_tag
                   where tag_id = (select id
                                   from tag
                                   where name = 'movie'))
    -- and not
    and id not in (select file_id
                   from file_tag
                   where tag_id = (select id
                                   from tag
                                   where name = 'song'))
